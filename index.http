<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Munna Cosmetics</title>
  <meta name="description" content="Munna Cosmetics - Perfume, Attar & Cosmetics | Admin-controlled single file site" />
  <style>
    :root{
      --red:#e10606; --white:#fff; --muted:#f6f6f6; --maxw:1100px;
      --card-shadow: 0 8px 24px rgba(0,0,0,0.08);
    }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, Roboto, Arial; margin:0; background:linear-gradient(#fff,var(--muted)); color:#222}
    .container{max-width:var(--maxw);margin:0 auto;padding:16px}
    header.site-header{display:flex;justify-content:space-between;align-items:center;background:var(--white);border-bottom:6px solid var(--red);padding:12px 16px;position:sticky;top:0;z-index:50}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:#111;font-weight:800}
    .brand img{width:46px;height:46px;border-radius:8px;object-fit:cover}
    nav a{margin-left:10px;text-decoration:none;color:#333;padding:8px;border-radius:8px}
    nav a.active{background:linear-gradient(90deg,var(--red),#b90000);color:#fff}
    .hero{display:grid;grid-template-columns:1fr 420px;gap:18px;align-items:center;padding:28px 0}
    .hero img{width:100%;border-radius:12px;box-shadow:var(--card-shadow)}
    .btn{background:var(--red);color:var(--white);padding:10px 16px;border-radius:10px;text-decoration:none;border:none;cursor:pointer}
    .products-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;margin-top:12px}
    .card{background:var(--white);padding:12px;border-radius:12px;box-shadow:var(--card-shadow);display:flex;flex-direction:column;gap:8px}
    .card img{width:100%;height:180px;object-fit:cover;border-radius:10px}
    .price{font-weight:800;color:var(--red)}
    .muted{color:#666}
    .whatsapp-fab{position:fixed;right:18px;bottom:18px;background:var(--red);color:#fff;width:56px;height:56px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-size:22px;z-index:60;text-decoration:none}
    footer.site-footer{padding:20px 0;margin-top:24px;display:flex;justify-content:space-between;align-items:center}
    input,textarea,select{padding:10px;border-radius:8px;border:1px solid #eee;width:100%}
    .small{padding:8px;border-radius:8px;border:1px solid #eee;background:#fff;cursor:pointer}
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.35);z-index:80}
    .modal .box{background:var(--white);padding:18px;border-radius:12px;width:90%;max-width:720px;box-shadow:0 12px 40px rgba(0,0,0,0.15)}
    .flex{display:flex;gap:12px;align-items:center}
    @media(max-width:880px){.hero{grid-template-columns:1fr}.brand img{width:40px;height:40px}}
    .admin-panel{background:#fff;padding:12px;border-radius:12px;box-shadow:var(--card-shadow);margin-top:12px}
    .navlinks{display:flex;gap:8px;flex-wrap:wrap}
    .hidden{display:none}
    .center{text-align:center}
    .badge{background:var(--red);color:#fff;padding:4px 8px;border-radius:999px;font-size:12px}
    .admin-quick{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .file-preview{width:100%;height:160px;object-fit:cover;border-radius:8px;border:1px dashed #eee}
    .tiny{font-size:13px;color:#666}
  </style>
</head>
<body>

  <!--
    Single-file Munna Cosmetics
    Admin details:
      - Default admin password: munna123
      - To change password: edit the ADMIN_PASSWORD constant inside the <script> (search for ADMIN_PASSWORD)
    Persistence: Uses localStorage key 'munna_products' and 'munna_cart_v1' and 'munna_admin'
  -->

  <header class="site-header container">
    <a class="brand" href="#home" onclick="showSection('home')">
      <img id="profile-img" src="" alt="Profile" onerror="this.src=placeholderData.profile">
      <span>Munna Cosmetics</span>
    </a>

    <nav>
      <a href="#home" onclick="showSection('home');setActive(event)" class="navlink active">Home</a>
      <a href="#products" onclick="showSection('products');setActive(event)" class="navlink">Products</a>
      <a href="#about" onclick="showSection('about');setActive(event)" class="navlink">About</a>
      <a href="#contact" onclick="showSection('contact');setActive(event)" class="navlink">Contact</a>
      <a href="#cart" onclick="showSection('cart');setActive(event)" class="navlink">Cart <span id="cart-count" class="badge">0</span></a>
      <a href="#admin" onclick="showSection('admin');setActive(event)" class="navlink">Admin</a>
    </nav>
  </header>

  <main class="container">

    <!-- HOME -->
    <section id="home" class="section">
      <div class="hero">
        <div>
          <h1>Munna Cosmetics</h1>
          <p class="muted">Premium perfumes, attars & cosmetics ‚Äî modern red & white theme. Add products using the Admin panel.</p>
          <div style="margin-top:12px">
            <button class="btn" onclick="showSection('products')">Shop Now</button>
            <button class="small" onclick="showSection('admin')">Open Admin</button>
          </div>
          <div style="margin-top:12px" class="tiny">Tip: Admin password (default) is <strong>munna123</strong>. Change it later in the code.</div>
        </div>
        <div class="card center">
          <img id="banner-img" src="" alt="Banner" style="width:100%;height:260px;object-fit:cover;border-radius:10px" onerror="this.src=placeholderData.banner">
          <div style="margin-top:8px;font-weight:700">Munna Specials</div>
          <div class="muted">Free shipping on orders above PKR 3,000</div>
        </div>
      </div>

      <section style="margin-top:10px">
        <h2>Featured</h2>
        <div id="featured" class="products-grid"></div>
      </section>
    </section>

    <!-- PRODUCTS -->
    <section id="products" class="section hidden">
      <h1>Products</h1>
      <div id="product-grid" class="products-grid"></div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section hidden">
      <h1>About Munna Cosmetics</h1>
      <p class="muted">We provide premium-quality perfumes, attars, and cosmetic products. Use the admin panel to manage products and orders. Replace the profile and banner images with your own from Admin.</p>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section hidden">
      <h1>Contact</h1>
      <p class="muted">WhatsApp: <strong>03197560048</strong></p>
      <p class="muted">Email: <strong>munna@example.com</strong> (change in Admin or below)</p>

      <h2>Send a quick message via WhatsApp</h2>
      <form id="contact-form" onsubmit="contactViaWhatsApp(event)">
        <label>Name</label><input id="cname" required>
        <label>Phone</label><input id="cphone">
        <label>Message</label><textarea id="cmsg" rows="4"></textarea>
        <div style="margin-top:8px"><button class="btn" type="submit">Send via WhatsApp</button></div>
      </form>
    </section>

    <!-- CART -->
    <section id="cart" class="section hidden">
      <h1>Your Cart</h1>
      <div id="cart-contents"></div>
    </section>

    <!-- ADMIN -->
    <section id="admin" class="section hidden">
      <h1>Admin Panel</h1>

      <div id="admin-login" class="admin-panel">
        <h3>Login</h3>
        <div class="tiny">Default admin password: <strong>munna123</strong>. To change, edit the ADMIN_PASSWORD in the script.</div>
        <label>Username</label><input id="admin-username" placeholder="admin">
        <label>Password</label><input id="admin-password" type="password" placeholder="password">
        <div style="margin-top:8px;display:flex;gap:8px">
          <button class="btn" onclick="adminLogin()">Login</button>
          <button class="small" onclick="adminLogout()">Logout</button>
        </div>
        <div id="login-msg" class="tiny" style="margin-top:8px;color:#666"></div>
      </div>

      <div id="admin-panel" class="admin-panel hidden">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div><strong>Signed in as Admin</strong></div>
          <div class="admin-quick">
            <button class="small" onclick="adminLogout()">Logout</button>
            <button class="small" onclick="wipeData()">Reset All (Warning)</button>
          </div>
        </div>

        <hr style="margin:12px 0">

        <h3>Profile & Banner</h3>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
          <div>
            <label>Profile Image (upload)</label>
            <input type="file" id="profile-file" accept="image/*">
            <div style="margin-top:8px"><img id="profile-preview" class="file-preview" src=""></div>
            <div style="margin-top:8px;display:flex;gap:8px"><button class="btn" onclick="saveProfileImage()">Save Profile</button></div>
          </div>
          <div>
            <label>Banner Image (upload)</label>
            <input type="file" id="banner-file" accept="image/*">
            <div style="margin-top:8px"><img id="banner-preview" class="file-preview" src=""></div>
            <div style="margin-top:8px;display:flex;gap:8px"><button class="btn" onclick="saveBannerImage()">Save Banner</button></div>
          </div>
        </div>

        <hr style="margin:12px 0">

        <h3>Add Product</h3>
        <div style="display:grid;gap:8px">
          <label>Product Name</label><input id="p-name">
          <label>Price (PKR)</label><input id="p-price" type="number">
          <label>Description</label><input id="p-desc">
          <label>Image (upload)</label><input id="p-image" type="file" accept="image/*">
          <div style="display:flex;gap:8px">
            <button class="btn" onclick="addProduct()">Add Product</button>
            <button class="small" onclick="clearAddProductForm()">Clear</button>
          </div>
        </div>

        <h3 style="margin-top:12px">Manage Products</h3>
        <div id="admin-products" class="products-grid"></div>

        <h3 style="margin-top:12px">Orders (local)</h3>
        <div id="admin-orders"></div>
      </div>
    </section>

  </main>

  <footer class="site-footer container">
    <div>¬© Munna Cosmetics</div>
    <div class="muted tiny">Built with ‚ù§Ô∏è ‚Äî Edit images & text in the Admin panel</div>
  </footer>

  <a class="whatsapp-fab" id="wa-fab" href="https://wa.me/923197560048" target="_blank" title="Chat on WhatsApp">üí¨</a>

  <!-- Modal for messages / receipts -->
  <div id="modal" class="modal"><div class="box" id="modal-box"></div></div>

<script>
/* =========================
   Single-file Munna Cosmetics
   Admin: client-side (localStorage)
   Default admin password: munna123
   ========================= */

const ADMIN_PASSWORD = 'munna123'; // <-- change this to a new password BEFORE sharing publicly
const STORAGE_KEY = 'munna_products_v1';
const STORAGE_CART = 'munna_cart_v1';
const STORAGE_ADMIN = 'munna_admin_v1';
const STORAGE_PROFILE = 'munna_profile_v1';
const placeholderData = {
  profile: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAABk2g9KAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAGXRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjEwFpaEAAAB4UlEQVR4nO3QwQ0CQQwEwZ2/6V0b2XMW0I1s0qgGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAb4G+J1W3Y0b8fF9s7u7u7ux9t7d3d3d3d3d3Zg3gq8K3w7xq+0b2zsb1t7e3t7e3t7e3t7e3t7e3t7c8w7oJvBf0c1r2zsb1t7e3t7e3t7e3t7e3t7e3t7c8w7oJvBf0c1r2zsb1t7e3t7e3t7e3t7e3t7e3t7c8w7oJvBf0c1r2zsb1t7e3t7e3t7e3t7f3d3d3d3d3d3d3d3d3d3d3d3f4n8wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP4CvgABAvq0Hh9L1wAAAAASUVORK5CYII=',
  banner: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAYAAABk2g9KAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBwYWludC5uZXQgNC4wLjEwFpaEAAAB4ElEQVR4nO3QwQ3DIBBF0e3/6dyk2wq6g3k/MoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgC+gX4nVtdyRvz8X2zu7u7u7sfbfor7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u7u4f8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC8D8gABgG8joS2f2sAAAAASUVORK5CYII='
};

/* ---------- Utilities ---------- */
function qs(sel){ return document.querySelector(sel); }
function qsa(sel){ return document.querySelectorAll(sel); }
function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.add('hidden'));
  const el = document.getElementById(id);
  if(el) el.classList.remove('hidden');
  // scroll top
  window.scrollTo(0,0);
}
function setActive(e){
  qsa('nav .navlink').forEach(a=>a.classList.remove('active'));
  if(e && e.currentTarget) e.currentTarget.classList.add('active');
}

function openModal(html){
  const modal = qs('#modal'); const box = qs('#modal-box');
  box.innerHTML = html;
  modal.style.display = 'flex';
}
function closeModal(){ qs('#modal').style.display = 'none'; qs('#modal-box').innerHTML = ''; }

/* ---------- Data storage helpers ---------- */
function loadProducts(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(!raw) return [];
    return JSON.parse(raw);
  }catch(e){ return []; }
}
function saveProducts(arr){ localStorage.setItem(STORAGE_KEY, JSON.stringify(arr)); }

function loadCart(){ try{return JSON.parse(localStorage.getItem(STORAGE_CART)||'[]')}catch(e){return []} }
function saveCart(c){ localStorage.setItem(STORAGE_CART, JSON.stringify(c)); updateCartCount(); }

function loadAdmin(){ try{return JSON.parse(localStorage.getItem(STORAGE_ADMIN)||'{}')}catch(e){return {} } }
function saveAdmin(obj){ localStorage.setItem(STORAGE_ADMIN, JSON.stringify(obj)); }

/* ---------- Initial default data (only set if no products exist) ---------- */
function seedIfEmpty(){
  const products = loadProducts();
  if(products.length===0){
    const demo = [
      {id: 'p1', name:'Rose Attar 30ml', price:650, desc:'Pure rose attar', image:placeholderData.product || '', created: Date.now()},
      {id: 'p2', name:'Oudh Attar 15ml', price:1200, desc:'Rich oudh', image:placeholderData.product || '', created: Date.now()},
      {id: 'p3', name:'Floral Perfume 50ml', price:950, desc:'Long lasting floral', image:placeholderData.product || '', created: Date.now()}
    ];
    saveProducts(demo);
  }
  // profile/banner defaults if none
  const prof = localStorage.getItem(STORAGE_PROFILE);
  if(!prof){
    localStorage.setItem(STORAGE_PROFILE, JSON.stringify({profile:placeholderData.profile, banner:placeholderData.banner}));
  }
}

/* ---------- Render functions ---------- */
function renderAll(){
  renderFeatured();
  renderProductGrid();
  renderAdminProducts();
  renderProfileAndBanner();
  renderCartPage();
  updateCartCount();
}

function renderFeatured(){
  const featured = qs('#featured');
  const products = loadProducts();
  featured.innerHTML = '';
  products.slice(0,4).forEach(p=> featured.innerHTML += productCardHTML(p));
}

function renderProductGrid(){
  const grid = qs('#product-grid');
  const products = loadProducts();
  grid.innerHTML = '';
  products.forEach(p=> grid.innerHTML += productCardHTML(p));
}

function productCardHTML(p){
  const img = p.image || placeholderData.product;
  const price = Number(p.price||0);
  return `<div class="card">
    <img src="${img}" alt="${escapeHtml(p.name)}" />
    <div><strong>${escapeHtml(p.name)}</strong></div>
    <div class="muted">${escapeHtml(p.desc || '')}</div>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div class="price">PKR ${price.toLocaleString()}</div>
      <div>
        <button class="small" onclick='openQuickView("${p.id}")'>View</button>
        <button class="btn" onclick='addToCart("${p.id}")'>Add to Cart</button>
      </div>
    </div>
  </div>`;
}

/* ---------- Quick view ---------- */
function openQuickView(id){
  const p = loadProducts().find(x=>x.id===id);
  if(!p) return alert('Product not found');
  openModal(`<div style="display:flex;gap:12px;align-items:flex-start">
    <img src="${p.image}" style="width:220px;height:180px;object-fit:cover;border-radius:8px"/>
    <div style="flex:1">
      <h3>${escapeHtml(p.name)}</h3>
      <div class="muted">PKR ${Number(p.price).toLocaleString()}</div>
      <p class="muted" style="margin-top:8px">${escapeHtml(p.desc||'')}</p>
      <div style="margin-top:12px;display:flex;gap:8px">
        <button class="btn" onclick='addToCart("${p.id}");closeModal();'>Add to Cart</button>
        <button class="small" onclick="closeModal()">Close</button>
      </div>
    </div>
  </div>`);
}

/* ---------- Cart ---------- */
function getCart(){ return loadCart(); }
function addToCart(id){
  const prod = loadProducts().find(p=>p.id===id); if(!prod) return alert('Product not found');
  const cart = getCart();
  const found = cart.find(x=>x.id===id);
  if(found) found.qty += 1; else cart.push({id:prod.id,name:prod.name,price:prod.price,qty:1});
  saveCart(cart);
  alert(prod.name + ' added to cart');
}

function updateCartCount(){
  const count = getCart().reduce((s,i)=>s + i.qty,0);
  qs('#cart-count').textContent = count;
}

function renderCartPage(){
  const cont = qs('#cart-contents');
  const cart = getCart();
  if(!cont) return;
  if(cart.length===0){ cont.innerHTML = '<div class="muted">Your cart is empty.</div>'; return; }
  let subtotal = 0;
  cont.innerHTML = cart.map(i=>{
    subtotal += i.price*i.qty;
    return `<div class="card"><div style="display:flex;justify-content:space-between;align-items:center">
      <div><strong>${escapeHtml(i.name)}</strong><div class="muted">PKR ${Number(i.price).toLocaleString()} x ${i.qty}</div></div>
      <div style="display:flex;gap:6px;align-items:center">
        <button class="small" onclick='changeQty("${i.id}", -1)'>-</button>
        <div>${i.qty}</div>
        <button class="small" onclick='changeQty("${i.id}", 1)'>+</button>
        <button class="small" onclick='removeFromCart("${i.id}")'>Remove</button>
      </div>
    </div></div>`;
  }).join('') + `<div style="margin-top:12px"><strong>Subtotal: PKR ${subtotal.toLocaleString()}</strong><div style="margin-top:8px;display:flex;gap:8px"><button class="btn" onclick="placeOrder()">Place Order</button><button class="small" onclick="clearCart()">Clear Cart</button></div></div>`;
}

function changeQty(id,delta){
  let cart = getCart();
  const it = cart.find(x=>x.id===id); if(!it) return;
  it.qty += delta;
  if(it.qty <= 0) cart = cart.filter(x=>x.id!==id);
  saveCart(cart);
  renderCartPage();
}

function removeFromCart(id){
  let cart = getCart(); cart = cart.filter(x=>x.id!==id); saveCart(cart); renderCartPage();
}
function clearCart(){ if(confirm('Clear cart?')){ saveCart([]); renderCartPage(); }}

/* ---------- Place Order (downloads receipt + option to send via WhatsApp) ---------- */
function placeOrder(){
  const cart = getCart(); if(cart.length===0) return alert('Cart is empty');
  const name = prompt('Enter your name for order'); if(!name) return;
  const phone = prompt('Enter phone number (e.g., 03xx...)'); if(!phone) return;
  const address = prompt('Enter delivery address'); if(!address) return;
  const subtotal = cart.reduce((s,i)=>s + i.price*i.qty,0);
  const orderId = 'MC' + Date.now();
  const order = {id:orderId, name, phone, address, items:cart, subtotal, date: new Date().toLocaleString()};
  // Save locally
  const orders = JSON.parse(localStorage.getItem('munna_orders_v1') || '[]'); orders.unshift(order); localStorage.setItem('munna_orders_v1', JSON.stringify(orders));
  // create receipt text
  let lines = []; lines.push('Munna Cosmetics'); lines.push('Order ID: ' + orderId); lines.push('Date: ' + order.date); lines.push('Name: ' + name); lines.push('Phone: ' + phone); lines.push('Address: ' + address); lines.push('Items:');
  order.items.forEach(it=> lines.push(`- ${it.name} x${it.qty} = PKR ${ (it.price*it.qty).toLocaleString() }`));
  lines.push('Subtotal: PKR ' + subtotal.toLocaleString()); lines.push('Thank you for ordering from Munna Cosmetics!');
  const txt = lines.join('\\n');
  downloadFile(txt, 'or
